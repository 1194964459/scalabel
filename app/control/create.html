<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Labeling tool</title>

    <!-- Bootstrap CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/bootstrap-switch.css" rel="stylesheet">
    <link href="./css/bootstrap-toggle.min.css" rel="stylesheet">

</head>

<body>
<!-- Page Content -->
<div class="container">

    <!-- Heading -->
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Labeling tool
                <small>version 1.0</small>
            </h1>
        </div>
    </div>
    <!-- /.row -->

    <div class="form-group">
        <input id="img-or-vid" type="checkbox" checked data-toggle="toggle" data-on="Image" data-off="Video" data-onstyle="success" data-offstyle="info" onchange="toggleForm()">
    </div>

    <!-- Content Row -->
    <div class="row">
        <div class="col-lg-12">

            <form id="img-form" action=/post>
                <div class="form-group">
                    <label for="project_name">Project Name:</label>
                    <input type="text" class="form-control" style="width:300px" id="project_name" name="project_name">
                </div>
                <div class="form-group">
                    <label for="image_list">Image List:</label>
                    <input type="file" class="form-control" style="width:300px" id="image_list" name="image_list">
                </div>
                <div class="form-group">
                    <label for="task_size">Task Size:</label>
                    <input type="text" class="form-control" style="width:300px;" id="task_size" name="task_size">
                </div>
                <div class="form-group">
                    <label for="label">Label:</label>
                    <input type="file" class="form-control" style="width:300px;" id="label" name="label">
                </div>
                <div class="form-group">
                    <label for="custom_attributes">Attributes (optional):</label>
                    <input type="file" class="form-control" style="width:300px" id="custom_attributes" name="custom_attributes">
                </div>
                <div class="form-group">
                    <label for="label_type">Label Type:</label>
                    <input type="text" class="form-control" style="width:300px;" id="label_type" name="label_type">
                </div>
                <div class="form-group">
                    <label for="vendor_id">Vendor ID:</label>
                    <input type="text" class="form-control" style="width:300px;"
                           id="vendor_id" name="vendor_id">
                </div>
                <button type="submit" id="enter_btn" class="btn btn-primary btn-md">Enter</button>
                <a type="submit" id="go_to_dashboard" class="btn btn-default btn-md" target="_blank" href="">Go to
                    Dashboard</a>
            </form>

            <form id="vid-form" action=/post>
                <div class="form-group">
                    <label for="video_project_name">Project Name:</label>
                    <input type="text" class="form-control" style="width:300px;" id="project_name" name="project_name">
                </div>
                <div class="form-group">
                    <label for="video_task_name">Task Name:</label>
                    <input type="text" class="form-control" style="width:300px;" id="task_name" name="task_name">
                </div>
                <div class="form-group">
                    <label for="video_name">Video Name:</label>
                    <input type="text" class="form-control" style="width:300px;" id="video_name" name="video_name">
                </div>
                <div class="form-group">
                    <label for="video_object_categories">Object Categories:</label>
                    <input type="file" class="form-control" style="width:300px;" id="object_categories" name="object_categories">
                </div>
                <button type="submit" id="enter_btn" class="btn btn-primary btn-md">Enter</button>
                <a type="submit" id="go_to_dashboard2" class="btn btn-default btn-md" target="_blank" href="">Go to
                    Dashboard</a>
            </form>

        </div>
    </div>
    <hr>

    <!-- Footer -->
    <footer>
        <!--<div class="row">
            <div class="col-lg-12">
                <p>Copyright &copy; Your Website 2014</p>
            </div>
        </div>-->
        <!-- /.row -->
    </footer>

</div>
<!-- /.container -->

<!-- Google Analytics -->
<script src="./js/thirdparty/analytics.js"></script>

<!-- jQuery -->
<script src="./js/thirdparty/jquery.js"></script>

<!-- Bootstrap JS -->
<script src="./js/thirdparty/bootstrap.min.js"></script>
<script src="./js/thirdparty/bootstrap-switch.js"></script>
<script src="./js/thirdparty/bootstrap-toggle.min.js"></script>


<script type="text/javascript">

    // hide video form at first
    $('#vid-form').hide();

    // switch between image and video forms
    function toggleForm() {

        if($('#img-or-vid')[0].checked) {
            $('#vid-form').hide();
            $('#img-form').show();
        } else {
            $('#img-form').hide();
            $('#vid-form').show();
        }
    };

    $(document).ready(function () {

        var dashboard = $('#go_to_dashboard');
        var dashboard2 = $('#go_to_dashboard2');
        dashboard.hide();
        dashboard2.hide();
        $('#img-form').submit(function (e) {
            e.preventDefault();
            var x = new XMLHttpRequest();
            x.onreadystatechange = function () {
                if (x.readyState === 4) {
                    var num_assignments = x.response;
                    var project_url = "./dashboard?project_name=" +
                        $('#project_name').val();
                    dashboard.attr('href', project_url);
                    dashboard.show();
                }
            };
            x.open("POST", "./postAssignment");
            x.send(new FormData(this));
        })
        $('#vid-form').submit(function (e) {
            e.preventDefault();
            var x = new XMLHttpRequest();
            x.onreadystatechange = function () {
                if (x.readyState === 4) {
                    var num_assignments = x.response;
                    var project_url = "./dashboard?project_name=" +
                        $('#video_project_name').val();
                    dashboard2.attr('href', project_url)
                    dashboard2.show();
                }
            };
            x.open("POST", "./postVideoAssignment");
            x.send(new FormData(this));
        })
    });


</script>

</body>

</html>
